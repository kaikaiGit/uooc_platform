<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>在线课程教学平台</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="css/carousel.css">
    <link rel="stylesheet" href="css/media.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="shortcut icon" href="../header-footer/images/ico.png" type="image/x-icon">
    <link rel="stylesheet" href="../header-footer/common.css">
</head>

<body>
    <!-- 页眉 -->
    <header class="navbar">
        <div class="nav">
            <div class="logo">
                <a href="../Homepage/Website Homepage.html"><img src="../header-footer/images/logo.png" alt="优课联盟"></a>
            </div>
            <nav>
                <ul>
                    <!-- TODO 补充链接 -->
                    <li><a href="../Homepage/Website Homepage.html">首页</a></li>
                    <li><a href="./courseList.html">课程</a></li>
                    <li><a href="./league.html">联盟院校</a></li>
                    <li><a href="./about-us.html">关于我们</a></li>
                </ul>
            </nav>
        </div>
        <div class="search-box">
            <input type="text" id="searchInput" placeholder="搜索课程...">
            <button type="button" id="searchButton"><i class="fas fa-search"></i></button>
        </div>
        <div class="info">
            <!-- TODO 补充链接 -->
        </div>
    </header>

    <main>

        <div class="main-content">
            <div class="left-content">
                <!-- 轮播图部分 -->
                <section class="carousel">
                    <!-- 导航栏插入到轮播图内部左侧 -->
                    <div class="carousel-nav">
                        <ul>
                            <li><a href="#" data-category="理学·工学" >理学·工学</a></li>
                            <li><a href="#" data-category="计算机" >计算机</a></li>
                            <li><a href="#" data-category="教育·语言" >教育·语言</a></li>
                            <li><a href="#" data-category="文学·艺术" >文学·艺术</a></li>
                            <li><a href="#" data-category="创业·职场" >创业·职场</a></li>
                            <li><a href="#" data-category="哲史·文化" >哲史·文化</a></li>
                            <li><a href="#" data-category="经济·管理" >经济·管理</a></li>
                            <li><a href="#" data-category="医学" >医学</a></li>
                        </ul>
                    </div>
                    <div class="carousel-inner">
                        <!-- 轮播图内容将由JavaScript动态生成 -->

                    </div>
                    <button class="prev" aria-label="Previous slide">❮</button>
                    <button class="next" aria-label="Next slide">❯</button>
                    <div class="carousel-indicators"></div>

                </section>
            </div>
        </div>



        <!-- 推荐课程部分 -->
        <section class="recommended-courses">
            <h2>推荐课程</h2>
            <div class="course-list">
                <!-- 推荐课程将由JavaScript动态生成 -->

            </div>
        </section>

        <!-- 热门课程部分 -->
        <section class="hot-courses">
            <h2>热门课程</h2>
            <div class="course-list">
                <!-- 热门课程将由JavaScript动态生成 -->

            </div>
        </section>

        <!-- 最新课程部分 -->
        <section class="new-courses">
            <h2>最新课程</h2>
            <div class="course-list">
                <!-- 最新课程将由JavaScript动态生成 -->

            </div>
        </section>
    </main>

    <!-- 页脚 -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-logo">
                <a href="#home"><img src="../header-footer/images/logo.png" alt="优课联盟"></a>
            </div>
            <div class="footer-text">
                <nav class="footer-nav">
                    <ul>
                        <li><a href="#about">关于我们</a></li>
                        <li><a href="#contact">联系我们</a></li>
                        <li><a href="#privacy">隐私政策</a></li>
                        <li><a href="#terms">服务条款</a></li>
                    </ul>
                </nav>
                <div class="footer-info">
                    <p>&copy; 2025 优课联盟. 保留所有权利.</p>
                </div>
            </div>
        </div>
    </footer>

    <script src="../database.js"></script>
    <script src="../account/account.js"></script>
    <script src="Homepage.js"></script>
    <script src="carousel.js"></script>


    <!--页眉js-->
    <script>
        //根据token获取用户信息
        window.onload = function () {
            const userid = localStorage.getItem('token');
            //如果有用户登录，在info的div中显示用户头像，如果没用，显示登录注册按钮
            if (userid) {
                const user = JSON.parse(localStorage.getItem(userid));
                let profileUrl = '';
                let profileName = '';
                let accountUrl = '';
                if (userid === 'admin') {
                    profileUrl = '../account/admin-profile.html';
                    profileName = '个人中心';
                    accountUrl = '../account/admin-profile.html';
                } else if (userid === 'teacher') {
                    profileUrl = '../teacher/teacher-profile.html';
                    profileName = '个人中心';
                    accountUrl = '../teacher/teacher-profile.html';
                } else {
                    profileUrl = '../student/student-profile.html';
                    profileName = '我的学习';
                    accountUrl = '../account/student-setting.html';
                }
                document.querySelector('.info').innerHTML = `
                    <a href="${profileUrl}">
                        <img id="user-head" src="${user.avatar}" alt="用户头像"></a>
                    <div class="card">
                        <ul>
                            <li><a href="${profileUrl}">${profileName}</a></li>
                            <li><a href="${accountUrl}">账号设置</a></li>
                            <li><a id="logout" href="#logout">退出登录</a></li>
                        </ul>
                    </div>
                `;
                //如果点击退出登录，清除token
                document.getElementById('logout').addEventListener('click', () => {
                    localStorage.removeItem('token');
                    window.location.href = '../Homepage/Website Homepage.html';
                });
            }
            else {
                document.querySelector('.info').innerHTML = `
                    <a href="../account/login.html"><button class="login">登录</button></a>
                    <a href="../account/register.html"><button class="register">注册</button></a>
                `;
            }
        }
    </script>

</body>

</html>