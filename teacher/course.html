<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>课程预览</title>
    <link rel="stylesheet" href="course.css">
    <link rel="stylesheet" href="../header-footer/common.css">
    <link rel="shortcut icon" href="../header-footer/images/ico.png" type="image/x-icon">
</head>
<body>

    <!-- 页眉 -->
    <header class="navbar">
        <div class="nav">
            <div class="logo">
                <a href="#home"><img src="../header-footer/images/logo.png" alt="优课联盟"></a>
            </div>
            <nav>
                <ul>
                    <!-- TODO 补充链接 -->
                    <li><a href="../Homepage/WebsiteHomepage.html">首页</a></li>
                    <li><a href="../Homepage/courseList.html">课程</a></li>
                    <li><a href="../Homepage/league.html">联盟院校</a></li>
                    <li><a href="../Homepage/about-us.html">关于我们</a></li>
                </ul>
            </nav>
        </div>
        <div class="info">
            <!-- TODO 补充链接 -->
        </div>
    </header>
    
    <!-- 主体 -->
    <div class="main-wrapper">
        <div class="container">
            <div id="coursePreview">
                <!-- 课程预览内容将在这里显示 -->

            </div>
        </div>
        <div class="container">
            <div id="otherMessage">
            <div class="tabs">
                <a class="tabs-item" href="#tasks/Intro">课程简介</a>
                <a class="tabs-item" href="#tasks/comment">课程评论</a>
                <a class="tabs-item" href="#tasks/note">课程笔记</a>
            </div>
            <div class="tabs-content">
                
                <div class="Intro">
                    <div id="Intro">
                        
                    </div>
                </div>

                <div class="comment">
                    <div id="comment">

                    </div>
                </div>

                <div class="note">
                    <div id="note">
                        
                    </div>
                </div>

            </div>
        </div>
    </div>
    </div>
    
    <!-- 页脚 -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-logo">
                <a href="#home"><img src="../header-footer/images/logo.png" alt="优课联盟"></a>
            </div>
            <div class="footer-text">
                <nav class="footer-nav">
                    <ul>
                        <li><a href="#about">关于我们</a></li>
                        <li><a href="#contact">联系我们</a></li>
                        <li><a href="#privacy">隐私政策</a></li>
                        <li><a href="#terms">服务条款</a></li>
                    </ul>
                </nav>
                <div class="footer-info">
                    <p>&copy; 2025 优课联盟. 保留所有权利.</p>
                </div>
            </div>
        </div>
    </footer>

    <script src="../database.js"></script>
    <script src="../account/account.js"></script>
    <script src="course.js"></script>
    <script>
        //根据token获取用户信息
        window.onload = function() {
            const userid = localStorage.getItem('token');
            //如果有用户登录，在info的div中显示用户头像，如果没用，显示登录注册按钮
            if(userid) {
                const user = JSON.parse(localStorage.getItem(userid));
                document.querySelector('.info').innerHTML = `
                    <a href="#study"><img id="user-head" src="${user.avatar}" alt="用户头像"></a>
                    <div class="card">
                        <ul>
                            <li><a href="../student/">我的学习</a></li>
                            <li><a href="../account/student-setting.html">账号设置</a></li>
                            <li><a id="logout" href="#logout">退出登录</a></li>
                        </ul>
                    </div>
                `;
                //如果点击退出登录，清除token
                document.getElementById('logout').addEventListener('click', () => {
                    localStorage.removeItem('token');
                    location.reload();
                });
            }
            else{
                document.querySelector('.info').innerHTML = `
                    <a href="../account/login.html"><button class="login">登录</button></a>
                    <a href="../account/register.html"><button class="register">注册</button></a>
                `;
            }
        }
    </script>
    <!-- <script>
        let userid = localStorage.getItem('token');
        let user = JSON.parse(localStorage.getItem(userid));
        document.getElementById('avatar').src = user.avatar;
        document.getElementById('user-name').innerText = user.username;
        //如果签名为空，显示"还没有设置签名"
        if(user.signature === '') {
            document.getElementById('signature').innerText = '还没有设置签名';
        }
        else {
            document.getElementById('signature').innerText = '签名：' + user.signature;
        }
    </script> -->

</body>
</html>